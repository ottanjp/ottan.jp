{{ define "header" }}
{{ partial "site-header.html" . }}
{{ end }}

{{ define "description"}}
<meta name="description" content="{{ .Summary }}" />
{{ end }}

{{ define "header-description" }}
<meta name="description" content="{{ .Summary }}..." />
<meta property="og:description" content="{{ .Summary }}..." />
<meta name="twitter:description" content="{{ .Summary }}..." />
<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="{{ .Date.Local.Format "2006-01-02T15:04:05Z07:00" | safeHTML }}">
{{ range .Params.tags }}
<meta property="og:article:tag" content="{{ . }}" />
{{ end }}
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@{{ .Site.Params.twitter }}" />
<meta name="twitter:creator" content="@{{ .Site.Params.twitter }}" />
<meta name="twitter:title" content="{{ .Title }}" />
<meta name="twitter:url" content="{{ .Permalink }}" />
{{ end }}

{{ define "header-image" }}
{{ $eyecatch_image := findRE "<img.*?src=([^>]*)?>" .Content 1 }}
{{ range $eyecatch_image }}
<meta property="og:image" content="{{ . | replaceRE ".*src=\"([^\"]+)\".*" "$1" | absURL }}">
<meta property="twitter:image" content="{{ . | replaceRE ".*src=\"([^\"]+)\".*" "$1" | absURL }}">
{{ end }}
{{ end }}

{{ define "katex-stylesheet" }}
{{ if .Params.katex }}
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
	integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
{{ end }}
{{ end }}

{{ define "katex-javascript" }}
{{ if .Params.katex }}
<script defer src="//cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
	integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous">
	</script>
<script defer src="//cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
	integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
	onload="renderMathInElement(document.body,{delimiters: [{ left: '\\[', right: '\\]', display: true },{ left: '$', right: '$', display: false }],});">
	</script>
{{ end }}
{{ end }}

{{ define "main" }}

{{- partial "hero" . -}}

<section class="container">

	<div class="columns is-desktop is-marginless">

		<div class="column is-1 is-hidden-mobile">
			<div class="sticky">
				<div class="sidebar">
					{{- partial "social-share.html" . -}}
				</div>
			</div>
		</div>

		<article class="column is-7">

			<div class="content markdown-body">
				{{- .Content | safeHTML -}}
			</div>

			<div class="article-footer">
				{{- partial "social-share.html" . -}}
			</div>

			<div class="has-text-centered">
				<div class="adsense">
					{{- partial "google-adsense1" -}}
					{{- partial "google-adsense2" -}}
				</div>
			</div>

			<div class="comments" id="comments">
				{{ template "_internal/disqus.html" . }}
			</div>

		</article>

		<div class="column">

			<!-- <div class="social-share-sticky"> -->
			<div class="sidebar">
				<div class="adsense is-hidden-mobile has-text-centered">
					{{- partial "google-adsense3" -}}
					{{- partial "google-adsense4" -}}
				</div>

				<div class="toc">
					{{- partial "related-posts" . -}}
				</div>
			</div>
			<!-- </div> -->

		</div>

	</div>
</section>


{{ end }}